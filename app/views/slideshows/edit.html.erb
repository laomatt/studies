  <div class="form-container">

  <center>
    <h1 class="head-edit-title"><%= @slideshow.title %></h1>

<div class="panel house left-house" style="overflow:auto">
  <ul class="slideshow_lists_edit_top edit-options-list">
    <a href="#" class="add-a-new-picture">
      <li class="entry" id="slide_add" ssid="<%= @slideshow.id %>" style="background-color:black;padding-top:1%"><i class="fa fa-upload" style="font-size: 50px;"></i><br>add image</li>
    </a>
    <a href="#" class="add-a-new-title">
      <li class="entry" id="title_edit" ssid="<%= @slideshow.id %>" style="background-color:black;padding-top:1%"><i class="fa fa-file-text" style="font-size: 50px;"></i><br>Edit title</li>
    </a>
    <a href="#" class="add-a-new-tags">
      <li class="entry" id="tags_edit" ssid="<%= @slideshow.id %>" style="background-color:black;padding-top:1%"><i class="fa fa-tags" style="font-size: 50px;"></i><br>Edit tags</li>
    </a>
    <a href="#" data-id="<%= @slideshow.id %>" id="toggle-public">
        <% if @slideshow.public? %>
          <li class="entry" id="tags_edit" ssid="<%= @slideshow.id %>" style="background-color:black;padding-top:1%;background-color:rgba(216,38,25,.5)">
          <i class="fa fa-eye-slash" style="font-size: 50px"></i><br>Make Private
        <% else %>
          <li class="entry" id="tags_edit" ssid="<%= @slideshow.id %>" style="background-color:black;padding-top:1%;background-color:rgba(111,240,56,.5)">
          <i class="fa fa-eye" style="font-size: 50px;"></i><br>Make Public
        <% end %>
      </li>
    </a>
  </ul>
</div>

<script>
  $("body").on('click', '#toggle-public', function(event) {
    event.preventDefault();
    var id = $(this).attr('data-id');
    $.ajax({
      url: '/slideshows/'+id+'/toggle_public',
    })
    .done(function(data) {
      if(data.public == true){
        $('#toggle-public').html('<li class="entry" id="tags_edit" ssid="<%= @slideshow.id %>" style="background-color:black;padding-top:1%;background-color:rgba(216,38,25,.5)"><i class="fa fa-eye-slash" style="font-size: 50px;"></i><br>Make Private</li>');
      } else {
        $('#toggle-public').html('<li class="entry" id="tags_edit" ssid="<%= @slideshow.id %>" style="background-color:black;padding-top:1%;background-color:rgba(111,240,56,.5)"><i class="fa fa-eye" style="font-size: 50px"></i><br>Make Public</li>');
      }
    })

  });


  $('body').on('click', '#all_slides_nsfw', function(event) {
    event.preventDefault();
    var id = $(this).attr('data-id');
    $.ajax({
      url: '/slideshows/'+id+'/mark_all_slides_nsfw',
      type: 'PATCH',
    })
    .done(function() {
      alert('All slides in this show Marked as unsafe for work.')
    })

  });
</script>



      <div class="success">Updated</div>


      <br>
      <br>
      <script>
      $(function() {
       $( "#sortable" ).sortable();
       $( "#sortable" ).disableSelection();
     });

      $('#sortable').draggable();
      </script>


    <div class="panel house right-house">
      <h3>Slide Order</h3>
      <p>Click and drag each slide to its desired position.</p>
      <div id="info" ssid="<%= @slideshow.id %>"></div>
      <ul id="sortable" class="slideshow_lists_edit">
        <% @images.each do |image|%>
          <% if !image.deleted %>
            <% if image.on_s3? %>
              <li class="entry" pic-id="<%= image.id %>" id="slide_<%= image.id %>" ssid="<%= @slideshow.id %>" style="background-image:url(<%= image.thumb_url %>)">
            <% else %>
              <li class="entry" pic-id="<%= image.id %>" id="slide_<%= image.id %>" ssid="<%= @slideshow.id %>" style="background-image:url(<%= image.ext_url %>)">
            <% end %>
            <br>
            <div class="pic-info">
              <a href="#" class="inspect-slide" data-id="<%= image.id %>">
                <i class="fa fa-info-circle"></i>
              </a>
              <a href="#" class="edit-slide" data-id="<%= image.id %>">
                <i class="fa fa-pencil-square-o"></i>
              </a>
              <a href="#" class="delete-slide" data-id="<%= image.id %>">
                <i class="fa fa-trash"></i>
              </a>
            </div>
          </li>
          <% end %>
        <% end %>
      </ul>
    </div>


<div class="edit-title-modal form-modal tagstitle title-modal">
  <h3>Edit title</h3>
  <form id="save_slide" action="/slideshows/update_slide_show" method="post">
    <input type="hidden" value="<%= form_authenticity_token %>" name="authenticity_token"/>
    <label for="info[title]">Title</label>
    <input type="hidden" name="id" value="<%= @slideshow.id %>">
    <input type="text" id="edit_title" value="<%= @slideshow.title %>" name="info[title]">
    <input type="submit">
  </form>
</div>

<div class="edit-tags-modal form-modal tagstitle tags-modal">
  <h3>Add tags to all slides</h3>
  <form action="/slideshows/update_slide_show_slide_tags" method="post">
    <input type="hidden" value="<%= form_authenticity_token %>" name="authenticity_token"/>
    <label for="tag_list">Title</label>
    <input type="hidden" name="id" value="<%= @slideshow.id %>">
    <input type="text" value="" placeholder="separate multiple tags with commas ..." name="tags_string">
    <input type="submit">
  </form>
  <a href="#" id="all_slides_nsfw" data-id="<%= @slideshow.id %>">Mark all slides not safe for work.</a>
</div>


<div class="upload-modal-pic form-modal">

  <div class="form-panel">
    <h3>Add Images</h3>
    <label for="keep-open-modal">Keep window from closing?</label>
    <input type="checkbox" id="keep-open-modal">
    <p>Two ways to add images ... </p>
    <div class="panelthird upmodal">
      <h4>Make with URL</h4>
      <br>
      <form action="#" id="upload-url">
       <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
       <input type="hidden" name="info[slideshow_id]" value="<%= @slideshow.id %>">
       <input type="text" style="width:100%" placeholder="Title this slide..." name="info[title]">
       <input type="text" style="width:100%" placeholder="Tag this slide (seperate by comma)..." name="info[tags]">
       <input type="text" style="width:100%" placeholder="Find an image and copy its URL..." name="info[ext_url]">
     </form>
     <br><br>
     <button class="upload-button Add-button-url" id="upload-pic-url">Add</button>
   </div>
  <div class="panelthird upmodal">
    <div class="screen-load">Uploading Image...</div>
      <h4>Upload from computer</h4>
      <%= form_for @slideshow, :html => {:id => "upload"} do |f| %>
      <%= f.file_field :picture %>
      <input type="text" name="tags_string" placeholder="tags seperated by commas" style="width:100%">
      <% end %>
      <br><br>
      <button class="upload-button" id="upload-pic">Upload</button>
    </div>
  </div>

</div>

  </div>
</center>

<style>
  .screen-load {
    background-color: white;
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 50;
    text-align: center;
    padding-top: 40%;
    display: none;
    color: black;
  }

  .panelthird_lower {
    position: relative;
    display: inline-block;
  }
</style>

